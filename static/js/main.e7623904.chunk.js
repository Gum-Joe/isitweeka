(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{20:function(e,t,n){},22:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),s=n.n(i),o=n(3),r=n.n(o),c=(n(20),n(6)),l=n.n(c),u=n(7),d=n(8),h=n(9),p=n(14),b=n(13),k="ga-disable-G-X4VMSWGN74";function w(e){document.cookie=k+"=".concat(e?"true":"false","; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/"),window[k]=e}n(22);var g=n(10),j=n.n(g),f=n(29),m="AIzaSyBJtspfBiYYXzpF3Nc32owjtjnJbRToxK4",y=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={gapiReady:!1,isNotWeekAB:!1,week:"unknown",apiHasRan:!1,isWeekend:!1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.loadGoogleAPI()}},{key:"loadGoogleAPI",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/client.js",t.async=!0,t.defer=!0,t.onload=function(){window.gapi.load("client",(function(){window.gapi.client.setApiKey(m),window.gapi.client.load("calendar","v3",(function(){e.setState({gapiReady:!0});try{e.getCalendar()}catch(t){console.error("Error: "+(null===t||void 0===t?void 0:t.message))}}))}))},document.body.appendChild(t)}},{key:"getMonday",value:function(e){var t=new Date(e),n=t.getDay(),a=t.getDate()-n+(6===n?8:1);return new Date(t.setDate(a))}},{key:"getCalendar",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,i,s,o,r,c,u,d,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"QA",console.log("QA"),t=new Date,(n=this.getMonday(t)).setUTCHours(0,0,0,0),(a=new Date(n)).setDate(a.getDate()+1),a.setUTCHours(0,0,0,0),6!==(i=t.getDay())&&0!==i||this.setState({isWeekend:!0}),s=n.toISOString(),o=a.toISOString(),r="calendar@camphillboys.bham.sch.uk",c="Europe/London",e.next=16,window.gapi.client.init({apiKey:m,discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]});case 16:return e.next=18,gapi.client.calendar.events.list({calendarId:r,timeZone:c,singleEvents:!0,timeMin:new Date(s).toISOString(),timeMax:new Date(o).toISOString(),maxResults:20,orderBy:"startTime"});case 18:if(!(u=e.sent).result.items){e.next=36;break}if(['<table class="wellness-calendar"><tbody>'],0!==(d=u.result.items.filter((function(e){return"Week A"===e.summary||"Week B"===e.summary}))).length){e.next=26;break}this.setState({isNotWeekAB:!0,week:"unknown",apiHasRan:!0}),e.next=36;break;case 26:h=d[0],e.t0=h.summary,e.next="Week A"===e.t0?30:"Week B"===e.t0?32:34;break;case 30:return this.setState({week:"A",apiHasRan:!0}),e.abrupt("break",36);case 32:return this.setState({week:"B",apiHasRan:!0}),e.abrupt("break",36);case 34:return this.setState({isNotWeekAB:!0,apiHasRan:!0}),e.abrupt("break",36);case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){return this.state.isNotWeekAB||"unknown"===this.state.week?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"It is neither Week A or B."}),Object(a.jsx)("h3",{children:"This means it's probably a holiday."}),Object(a.jsxs)("h4",{children:["If you believe this is in error, please email ",Object(a.jsx)("a",{href:"mailto:info@isitweeka.com",children:"info@isitweeka.com"})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:this.state.isWeekend?"Next week will be":"It is"})," ",Object(a.jsxs)("h1",{children:["Week ",this.state.week]}),Object(a.jsx)("h4",{children:"More coming soon..."})]})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)("div",{className:"isitweeka",children:this.state.apiHasRan?this.getStatus():Object(a.jsx)("h2",{children:"Loading..."})}),Object(a.jsx)(f.a,{fixed:"bottom",children:Object(a.jsxs)(j.a,{enableDeclineButton:!0,declineButtonText:"No thanks",onAccept:function(){w(!1),window.location.reload()},onDecline:function(){w(!0),window.location.reload()},children:["This website uses cookies (via Google Analytics) for analytics.",Object(a.jsx)("a",{href:"/privacy.html",children:"View Privacy Policy"})]})})]})}}]),n}(i.Component),v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,30)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),s(e),o(e)}))};r.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root")),v()}},[[26,1,2]]]);
//# sourceMappingURL=main.e7623904.chunk.js.map