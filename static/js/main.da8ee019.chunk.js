(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),i=n.n(s),r=n(4),c=n.n(r),o=(n(15),n(3)),l=n.n(o),u=n(5),d=n(6),h=n(7),p=n(9),b=n(8),k=(n(17),"AIzaSyBJtspfBiYYXzpF3Nc32owjtjnJbRToxK4"),g=function(e){Object(p.a)(n,e);var t=Object(b.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={gapiReady:!1,isNotWeekAB:!1,week:"unknown",apiHasRan:!1,isWeekend:!1},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.loadGoogleAPI()}},{key:"loadGoogleAPI",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/client.js",t.async=!0,t.defer=!0,t.onload=function(){window.gapi.load("client",(function(){window.gapi.client.setApiKey(k),window.gapi.client.load("calendar","v3",(function(){e.setState({gapiReady:!0});try{e.getCalendar()}catch(t){console.error("Error: "+(null===t||void 0===t?void 0:t.message))}}))}))},document.body.appendChild(t)}},{key:"getMonday",value:function(e){var t=new Date(e),n=t.getDay(),a=t.getDate()-n+(6===n?8:1);return new Date(t.setDate(a))}},{key:"getCalendar",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,s,i,r,c,o,u,d,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Date).setDate(2),t.setMonth(0),t.setFullYear(2021),(n=this.getMonday(t)).setUTCHours(0,0,0,0),(a=new Date(n)).setDate(a.getDate()+1),a.setUTCHours(0,0,0,0),6!==(s=t.getDay())&&0!==s||this.setState({isWeekend:!0}),i=n.toISOString(),r=a.toISOString(),c="calendar@camphillboys.bham.sch.uk",o="Europe/London",e.next=17,window.gapi.client.init({apiKey:k,clientId:"315952430187-dnr3c50ojube21n64i1a85jr8l8787pq.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"]});case 17:return e.next=19,gapi.client.calendar.events.list({calendarId:c,timeZone:o,singleEvents:!0,timeMin:new Date(i).toISOString(),timeMax:new Date(r).toISOString(),maxResults:20,orderBy:"startTime"});case 19:if(!(u=e.sent).result.items){e.next=37;break}if(['<table class="wellness-calendar"><tbody>'],0!==(d=u.result.items.filter((function(e){return"Week A"===e.summary||"Week B"===e.summary}))).length){e.next=27;break}this.setState({isNotWeekAB:!0,week:"unknown",apiHasRan:!0}),e.next=37;break;case 27:h=d[0],e.t0=h.summary,e.next="Week A"===e.t0?31:"Week B"===e.t0?33:35;break;case 31:return this.setState({week:"A",apiHasRan:!0}),e.abrupt("break",37);case 33:return this.setState({week:"B",apiHasRan:!0}),e.abrupt("break",37);case 35:return this.setState({isNotWeekAB:!0,apiHasRan:!0}),e.abrupt("break",37);case 37:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStatus",value:function(){return this.state.isNotWeekAB||"unknown"===this.state.week?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:"It is neither Week A or B."}),Object(a.jsx)("h3",{children:"This means it's probably a holiday."}),Object(a.jsxs)("h4",{children:["If you beleive this is in error, please email ",Object(a.jsx)("a",{href:"mailto:contact@isitweeka.com",children:"contact@isitweeka.com"})]})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h2",{children:this.state.isWeekend?"Next week will be":"It is"})," ",Object(a.jsxs)("h1",{children:["Week ",this.state.week]}),Object(a.jsx)("h4",{children:"More coming soon..."})]})}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)("div",{className:"isitweeka",children:this.state.apiHasRan?this.getStatus():Object(a.jsx)("h1",{children:"Loading..."})})})}}]),n}(s.Component),j=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};c.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(g,{})}),document.getElementById("root")),j()}},[[18,1,2]]]);
//# sourceMappingURL=main.da8ee019.chunk.js.map